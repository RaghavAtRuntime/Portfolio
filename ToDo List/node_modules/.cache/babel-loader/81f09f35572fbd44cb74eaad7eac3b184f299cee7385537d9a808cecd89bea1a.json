{"ast":null,"code":"export default class Queue {\n  constructor(opts = {}) {\n    this.concurrency = 1;\n    this._running = 0;\n    this._queue = [];\n    if (opts.concurrency) this.concurrency = opts.concurrency;\n  }\n  runNext() {\n    const job = this._queue.shift();\n    if (!job) return;\n    this._running++;\n    job.func().then(result => job.resolve(result)).catch(error => job.reject(error)).finally(() => {\n      this._running--;\n      this.checkQueue();\n    });\n  }\n  checkQueue() {\n    if (this._running < this.concurrency) this.runNext();\n  }\n  add(func) {\n    return new Promise((resolve, reject) => {\n      this._queue.push({\n        func,\n        resolve,\n        reject\n      });\n      this.checkQueue();\n    });\n  }\n}","map":{"version":3,"names":["Queue","constructor","opts","concurrency","_running","_queue","runNext","job","shift","func","then","result","resolve","catch","error","reject","finally","checkQueue","add","Promise","push"],"sources":["/Users/raghavsinha/sandbox/node_modules/yahoo-finance2/dist/esm/src/lib/queue.js"],"sourcesContent":["export default class Queue {\n    constructor(opts = {}) {\n        this.concurrency = 1;\n        this._running = 0;\n        this._queue = [];\n        if (opts.concurrency)\n            this.concurrency = opts.concurrency;\n    }\n    runNext() {\n        const job = this._queue.shift();\n        if (!job)\n            return;\n        this._running++;\n        job\n            .func()\n            .then((result) => job.resolve(result))\n            .catch((error) => job.reject(error))\n            .finally(() => {\n            this._running--;\n            this.checkQueue();\n        });\n    }\n    checkQueue() {\n        if (this._running < this.concurrency)\n            this.runNext();\n    }\n    add(func) {\n        return new Promise((resolve, reject) => {\n            this._queue.push({ func, resolve, reject });\n            this.checkQueue();\n        });\n    }\n}\n"],"mappings":"AAAA,eAAe,MAAMA,KAAK,CAAC;EACvBC,WAAWA,CAACC,IAAI,GAAG,CAAC,CAAC,EAAE;IACnB,IAAI,CAACC,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,QAAQ,GAAG,CAAC;IACjB,IAAI,CAACC,MAAM,GAAG,EAAE;IAChB,IAAIH,IAAI,CAACC,WAAW,EAChB,IAAI,CAACA,WAAW,GAAGD,IAAI,CAACC,WAAW;EAC3C;EACAG,OAAOA,CAAA,EAAG;IACN,MAAMC,GAAG,GAAG,IAAI,CAACF,MAAM,CAACG,KAAK,CAAC,CAAC;IAC/B,IAAI,CAACD,GAAG,EACJ;IACJ,IAAI,CAACH,QAAQ,EAAE;IACfG,GAAG,CACEE,IAAI,CAAC,CAAC,CACNC,IAAI,CAAEC,MAAM,IAAKJ,GAAG,CAACK,OAAO,CAACD,MAAM,CAAC,CAAC,CACrCE,KAAK,CAAEC,KAAK,IAAKP,GAAG,CAACQ,MAAM,CAACD,KAAK,CAAC,CAAC,CACnCE,OAAO,CAAC,MAAM;MACf,IAAI,CAACZ,QAAQ,EAAE;MACf,IAAI,CAACa,UAAU,CAAC,CAAC;IACrB,CAAC,CAAC;EACN;EACAA,UAAUA,CAAA,EAAG;IACT,IAAI,IAAI,CAACb,QAAQ,GAAG,IAAI,CAACD,WAAW,EAChC,IAAI,CAACG,OAAO,CAAC,CAAC;EACtB;EACAY,GAAGA,CAACT,IAAI,EAAE;IACN,OAAO,IAAIU,OAAO,CAAC,CAACP,OAAO,EAAEG,MAAM,KAAK;MACpC,IAAI,CAACV,MAAM,CAACe,IAAI,CAAC;QAAEX,IAAI;QAAEG,OAAO;QAAEG;MAAO,CAAC,CAAC;MAC3C,IAAI,CAACE,UAAU,CAAC,CAAC;IACrB,CAAC,CAAC;EACN;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}